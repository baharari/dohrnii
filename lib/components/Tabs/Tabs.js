var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireDefault(require("react"));var _reactNative=require("react-native");var _Text=_interopRequireDefault(require("../Text/Text"));var _providers=require("../../providers");var _theme=require("../../theme");var _styles=_interopRequireDefault(require("./styles"));var _List=_interopRequireDefault(require("./List"));var _Tab=_interopRequireDefault(require("./Tab"));var _Panel=_interopRequireDefault(require("./Panel"));var _constants=require("../../constants");var _jsxRuntime=require("react/jsx-runtime");var _excluded=["defaultValue","value","onChange","theme","variant","borderRadius","backgroundColor","color","size","style","children"];var _this=this,_jsxFileName="/Users/limonagaci/Desktop/app/dohrnii/src/components/Tabs/Tabs.js";var Tabs=function Tabs(props){var _themeMode$typography,_themeMode$typography2,_themeMode$typography3,_themeMode$colors,_themeMode$colors2,_themeMode$colors3,_themeMode$colors4,_themeMode$colors5,_listNode$props;var _useTheme=(0,_providers.useTheme)(),themeMode=_useTheme.theme;var styles=(0,_styles.default)(themeMode);var defaultValue=props.defaultValue,value=props.value,onChange=props.onChange,_props$theme=props.theme,theme=_props$theme===void 0?'default':_props$theme,_props$variant=props.variant,variant=_props$variant===void 0?'solid':_props$variant,_props$borderRadius=props.borderRadius,borderRadius=_props$borderRadius===void 0?_constants.spacing.borderRadius.m:_props$borderRadius,backgroundColor=props.backgroundColor,color=props.color,_props$size=props.size,size=_props$size===void 0?'md':_props$size,style=props.style,children=props.children,rest=(0,_objectWithoutProperties2.default)(props,_excluded);var SIZE_METRICS={sm:{listPad:3,tabPadH:8,tabPadV:6,fontSize:(themeMode==null||(_themeMode$typography=themeMode.typography)==null||(_themeMode$typography=_themeMode$typography.fontSize)==null?void 0:_themeMode$typography.s)||12},md:{listPad:4,tabPadH:12,tabPadV:8,fontSize:(themeMode==null||(_themeMode$typography2=themeMode.typography)==null||(_themeMode$typography2=_themeMode$typography2.fontSize)==null?void 0:_themeMode$typography2.m)||14},lg:{listPad:4,tabPadH:12,tabPadV:8,fontSize:(themeMode==null||(_themeMode$typography3=themeMode.typography)==null||(_themeMode$typography3=_themeMode$typography3.fontSize)==null?void 0:_themeMode$typography3.l)||16}};var sizeMetrics=SIZE_METRICS[size]||SIZE_METRICS.md;var isControlled=value!==undefined;var _React$useState=_react.default.useState(defaultValue),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),internalValue=_React$useState2[0],setInternalValue=_React$useState2[1];var activeValue=isControlled?value:internalValue;var accentColor=color?(0,_theme.processColorValue)(color):theme?theme==='default'?themeMode==null||(_themeMode$colors=themeMode.colors)==null||(_themeMode$colors=_themeMode$colors.tabs[variant])==null?void 0:_themeMode$colors.indicatorColor:styles.getVariant(variant,theme).tab.color:themeMode==null||(_themeMode$colors2=themeMode.colors)==null?void 0:_themeMode$colors2.white;var listBackground=backgroundColor?(0,_theme.processColorValue)(backgroundColor):theme?theme==="default"?themeMode==null||(_themeMode$colors3=themeMode.colors)==null||(_themeMode$colors3=_themeMode$colors3.tabs[variant])==null?void 0:_themeMode$colors3.backgroundColor:styles.getVariant(variant,theme).tab.backgroundColor:themeMode==null||(_themeMode$colors4=themeMode.colors)==null||(_themeMode$colors4=_themeMode$colors4.gray)==null?void 0:_themeMode$colors4[1];var textColor=theme==="default"?themeMode==null||(_themeMode$colors5=themeMode.colors)==null||(_themeMode$colors5=_themeMode$colors5.tabs[variant])==null?void 0:_themeMode$colors5.color:styles.getVariant(variant,theme).text.color;var handleChange=function handleChange(next){if(!isControlled)setInternalValue(next);if(onChange)onChange(next);};var childrenArray=_react.default.Children.toArray(children);var listNode=childrenArray.find(function(child){var _child$type;return(child==null||(_child$type=child.type)==null?void 0:_child$type.displayName)==='TabsList';});var listStyle=listNode==null||(_listNode$props=listNode.props)==null?void 0:_listNode$props.style;var tabNodes=listNode?_react.default.Children.toArray(listNode.props.children).filter(function(c){var _c$type;return(c==null||(_c$type=c.type)==null?void 0:_c$type.displayName)==='TabsTab';}):[];var panelNodes=childrenArray.filter(function(child){var _child$type2;return(child==null||(_child$type2=child.type)==null?void 0:_child$type2.displayName)==='TabsPanel';});var _React$useState3=_react.default.useState(0),_React$useState4=(0,_slicedToArray2.default)(_React$useState3,2),listWidth=_React$useState4[0],setListWidth=_React$useState4[1];var _React$useState5=_react.default.useState({}),_React$useState6=(0,_slicedToArray2.default)(_React$useState5,2),tabLayouts=_React$useState6[0],setTabLayouts=_React$useState6[1];var indicatorX=_react.default.useRef(new _reactNative.Animated.Value(0)).current;var _React$useState7=_react.default.useState(0),_React$useState8=(0,_slicedToArray2.default)(_React$useState7,2),indicatorWidthNum=_React$useState8[0],setIndicatorWidthNum=_React$useState8[1];var _React$useState9=_react.default.useState(variant==='solid'?0:2),_React$useState0=(0,_slicedToArray2.default)(_React$useState9,2),indicatorHeightNum=_React$useState0[0],setIndicatorHeightNum=_React$useState0[1];_react.default.useEffect(function(){var activeLayout=tabLayouts[activeValue];if(!activeLayout)return;var nextHeight=variant==='solid'?activeLayout.height:2;setIndicatorWidthNum(activeLayout.width);setIndicatorHeightNum(nextHeight);_reactNative.Animated.timing(indicatorX,{toValue:activeLayout.x,duration:180,useNativeDriver:true}).start();},[activeValue,variant,tabLayouts]);return(0,_jsxRuntime.jsxs)(_reactNative.View,Object.assign({style:[styles.container,style]},rest,{children:[(0,_jsxRuntime.jsxs)(_reactNative.View,{style:[styles.list,listStyle],onLayout:function onLayout(e){return setListWidth(e.nativeEvent.layout.width);},children:[(0,_jsxRuntime.jsx)(_reactNative.View,{style:{position:'absolute',bottom:0,height:variant==="solid"?'100%':2,width:listWidth,borderRadius:borderRadius,backgroundColor:listBackground}}),(0,_jsxRuntime.jsx)(_reactNative.Animated.View,{pointerEvents:"none",style:{position:'absolute',bottom:variant==='solid'?sizeMetrics.listPad:0,height:indicatorHeightNum,width:indicatorWidthNum,backgroundColor:accentColor,borderRadius:Math.max(borderRadius-sizeMetrics.listPad,0),transform:[{translateX:indicatorX}],zIndex:0}}),(0,_jsxRuntime.jsx)(_reactNative.View,{style:{padding:sizeMetrics.listPad,flexDirection:'row'},children:tabNodes.map(function(tab){var _tab$props=tab.props,tabValue=_tab$props.value,disabled=_tab$props.disabled,tabStyle=_tab$props.style;var active=activeValue===tabValue;return(0,_jsxRuntime.jsx)(_reactNative.Pressable,{activeOpacity:disabled?1:0.7,onPress:function onPress(){return disabled?null:handleChange(tabValue);},style:[styles.tabBase,{zIndex:1,paddingHorizontal:sizeMetrics.tabPadH,paddingVertical:sizeMetrics.tabPadV},disabled&&styles.tabDisabled,tabStyle],onLayout:function onLayout(e){var _e$nativeEvent$layout=e.nativeEvent.layout,x=_e$nativeEvent$layout.x,width=_e$nativeEvent$layout.width,height=_e$nativeEvent$layout.height;setTabLayouts(function(prev){return Object.assign({},prev,(0,_defineProperty2.default)({},tabValue,{x:x,width:width,height:height}));});},children:(0,_jsxRuntime.jsx)(_reactNative.View,{style:styles.tabInnerRow,children:typeof tab.props.children==='string'?(0,_jsxRuntime.jsx)(_Text.default,{fontWeight:'500',style:[styles.tabText,{color:active?textColor:themeMode.colors.text.darkgray,fontSize:sizeMetrics.fontSize}],children:tab.props.children}):tab.props.children})},String(tabValue));})})]}),(0,_jsxRuntime.jsx)(_reactNative.View,{style:styles.panels,children:panelNodes.map(function(panel){var _panel$props=panel.props,panelValue=_panel$props.value,panelStyle=_panel$props.style;if(panelValue!==activeValue)return null;return(0,_jsxRuntime.jsx)(_reactNative.View,{style:[styles.panel,panelStyle],children:panel.props.children},String(panelValue));})})]}));};Tabs.List=_List.default;Tabs.Tab=_Tab.default;Tabs.Panel=_Panel.default;var _default=exports.default=Tabs;