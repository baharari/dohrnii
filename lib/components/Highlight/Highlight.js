var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireWildcard(require("react"));var _Text=_interopRequireDefault(require("../Text/Text"));var _providers=require("../../providers");var _theme=require("../../theme");var _styles=_interopRequireDefault(require("./styles"));var _types=require("./types");var _jsxRuntime=require("react/jsx-runtime");var _excluded=["highlight","color","style","renderHiglight","caseSensitive","children"];var _this=this,_jsxFileName="/Users/limonagaci/Desktop/app/dohrnii/src/components/Highlight/Highlight.js";function _interopRequireWildcard(e,t){if("function"==typeof WeakMap)var r=new WeakMap(),n=new WeakMap();return(_interopRequireWildcard=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;var o,i,f={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return f;if(o=t?n:r){if(o.has(e))return o.get(e);o.set(e,f);}for(var _t in e)"default"!==_t&&{}.hasOwnProperty.call(e,_t)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,_t))&&(i.get||i.set)?o(f,_t,i):f[_t]=e[_t]);return f;})(e,t);}var escapeRegExp=function escapeRegExp(str){return str.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');};var Highlight=function Highlight(props){var _useTheme=(0,_providers.useTheme)(),themeMode=_useTheme.theme;var styles=(0,_styles.default)(themeMode);var _HighlightDefaultProp=Object.assign({},_types.HighlightDefaultProps,props),highlight=_HighlightDefaultProp.highlight,color=_HighlightDefaultProp.color,style=_HighlightDefaultProp.style,renderHiglight=_HighlightDefaultProp.renderHiglight,caseSensitive=_HighlightDefaultProp.caseSensitive,children=_HighlightDefaultProp.children,rest=(0,_objectWithoutProperties2.default)(_HighlightDefaultProp,_excluded);var highlightInput=highlight!=null?highlight:props.higlight;if(typeof children!=='string'){return(0,_jsxRuntime.jsx)(_Text.default,Object.assign({style:[styles.container,style]},rest,{children:children}));}var tokens=function(){if(typeof highlightInput==='string'&&highlightInput.length>0){return[highlightInput];}if(Array.isArray(highlightInput)){return highlightInput.filter(function(t){return typeof t==='string'&&t.length>0;});}return[];}();if(tokens.length===0){return(0,_jsxRuntime.jsx)(_Text.default,Object.assign({style:[styles.container,style]},rest,{children:children}));}var pattern=(0,_react.useMemo)(function(){var escaped=tokens.map(escapeRegExp);var flags=caseSensitive?'g':'gi';return new RegExp(`(${escaped.join('|')})`,flags);},[tokens,caseSensitive]);var content=[];var lastIndex=0;var match;var partIndex=0;while((match=pattern.exec(children))!==null){var start=match.index;var end=start+match[0].length;if(start>lastIndex){content.push((0,_jsxRuntime.jsx)(_Text.default,{children:children.slice(lastIndex,start)},`t-${partIndex++}`));}var matchedText=match[0];if(typeof renderHiglight==='function'){var node=renderHiglight(matchedText,partIndex);content.push(_react.default.isValidElement(node)?_react.default.cloneElement(node,{key:`h-${partIndex++}`}):(0,_jsxRuntime.jsx)(_Text.default,{children:String(node)},`h-${partIndex++}`));}else{content.push((0,_jsxRuntime.jsx)(_Text.default,{style:{color:(0,_theme.processColorValue)(color)},children:matchedText},`h-${partIndex++}`));}lastIndex=end;}if(lastIndex<children.length){content.push((0,_jsxRuntime.jsx)(_Text.default,{children:children.slice(lastIndex)},`t-${partIndex++}`));}return(0,_jsxRuntime.jsx)(_Text.default,Object.assign({style:[styles.container,style]},rest,{children:content}));};Highlight.propTypes=_types.HighlightPropTypes;var _default=exports.default=Highlight;