var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.useTheme=exports.default=exports.ThemeProvider=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _themes=require("../constants/themes");var _extendedStyleSheet=require("../theme/extendedStyleSheet");var _reactNative=require("react-native");var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/Users/limonagaci/Desktop/app/dohrnii/src/providers/ThemeProvider.js";function _interopRequireWildcard(e,t){if("function"==typeof WeakMap)var r=new WeakMap(),n=new WeakMap();return(_interopRequireWildcard=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;var o,i,f={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return f;if(o=t?n:r){if(o.has(e))return o.get(e);o.set(e,f);}for(var _t in e)"default"!==_t&&{}.hasOwnProperty.call(e,_t)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,_t))&&(i.get||i.set)?o(f,_t,i):f[_t]=e[_t]);return f;})(e,t);}var ThemeContext=(0,_react.createContext)({theme:_themes.lightTheme,setTheme:function setTheme(){},toggleTheme:function toggleTheme(){}});var ThemeProvider=exports.ThemeProvider=function ThemeProvider(_ref){var children=_ref.children,_ref$mode=_ref.mode,mode=_ref$mode===void 0?'light':_ref$mode,_ref$theme=_ref.theme,userTheme=_ref$theme===void 0?null:_ref$theme,_ref$initialTheme=_ref.initialTheme,initialTheme=_ref$initialTheme===void 0?_themes.lightTheme:_ref$initialTheme;var _useState=(0,_react.useState)(mode),_useState2=(0,_slicedToArray2.default)(_useState,2),currentMode=_useState2[0],setCurrentMode=_useState2[1];var _useState3=(0,_react.useState)(function(){if(userTheme&&(userTheme[currentMode]||userTheme.light&&userTheme.dark)){return userTheme[currentMode]||(currentMode==='dark'?userTheme.dark:userTheme.light);}return currentMode==='dark'?_themes.darkTheme:initialTheme;}),_useState4=(0,_slicedToArray2.default)(_useState3,2),theme=_useState4[0],setThemeState=_useState4[1];(0,_react.useEffect)(function(){(0,_extendedStyleSheet.updateThemeForStyles)(theme);},[theme]);(0,_react.useEffect)(function(){setCurrentMode(mode);if(userTheme&&(userTheme[mode]||userTheme.light&&userTheme.dark)){setThemeState(userTheme[mode]||(mode==='dark'?userTheme.dark:userTheme.light));}else{setThemeState(mode==='dark'?_themes.darkTheme:_themes.lightTheme);}},[mode,userTheme]);var toggleTheme=(0,_react.useCallback)(function(){setCurrentMode(function(prevMode){var next=prevMode==='light'?'dark':'light';if(userTheme&&(userTheme[next]||userTheme.light&&userTheme.dark)){setThemeState(userTheme[next]||(next==='dark'?userTheme.dark:userTheme.light));}else{setThemeState(next==='dark'?_themes.darkTheme:_themes.lightTheme);}return next;});},[userTheme]);var setTheme=(0,_react.useCallback)(function(newTheme){setThemeState(newTheme);},[]);return(0,_jsxRuntime.jsx)(ThemeContext.Provider,{value:{theme:theme,setTheme:setTheme,toggleTheme:toggleTheme},children:(0,_jsxRuntime.jsx)(_reactNative.View,{style:{flex:1,backgroundColor:theme.colors.background.primary},children:children})});};var useTheme=exports.useTheme=function useTheme(){return(0,_react.useContext)(ThemeContext);};var _default=exports.default=ThemeProvider;